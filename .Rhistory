#| label: load-data
#| message: false
bristolbaydata <- read.csv("salmondata/Alaska Statewide Salmon Landings by Area and Species 1985-present Fish Tickets.csv")
#| View(bristolbaydata)
View(bristolbaydata)
# Load in your Census API key (replace YOUR_API_KEY with your actual key)
census_api_key("bb73885ab8f3be3c5698b5f0c877b59125018a44", install = TRUE)
```{r, message=FALSE, warning=FALSE}
# Load necessary libraries
library(tidyverse)
# Load necessary libraries
library(tidyverse)
library(tidycensus)
library(flextable)
library(sf)
library(tigris)
library(sf)
library(tigris)
library(tmap)
library(RColorBrewer)
# Load in your Census API key (replace YOUR_API_KEY with your actual key)
census_api_key("bb73885ab8f3be3c5698b5f0c877b59125018a44", install = TRUE)
salmon <- read_csv("/salmondata/salmon.csv")
salmon <- read_csv("salmondata/salmon.csv")
view(salmon)
salmon <- salmon %>% rename(sp_name = `Species Name`,
num_fish = `Number Of Fish (estimated)`,
land_weight = `Landed Weight (lbs)`,
whole_weight = `Whole Weight (lbs)`,
num_permit = `Permit Count`,
num_processor = `Processor Count`,
num_vessel = `Vessel Count`)
view(salmon)
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(aes(color = sp_name), stat = "identity")
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_line(aes(color = sp_name), stat = "smooth")
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(aes(color = sp_name), stat = "smooth")
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(aes(color = sp_name), stat = "identity")
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(stat = "identity")+
facet_wrap(~sp_name)
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_bar(stat = "identity")+
facet_wrap(~sp_name)
?geom_density
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(position = "identity")+
facet_wrap(~sp_name)
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(stat = "identity")+
facet_wrap(~sp_name)
ggplot(salmon, aes(x = Year, y = num_fish))+
stat_density(stat = "identity", aes(color = sp_name))
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_density(stat = "identity", aes(color = sp_name))
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_line(stat = "identity", aes(color = sp_name))
fishandgame <- read.csv("fish_and_game.csv")
# Load necessary libraries
library(tidyverse)
salmon <- read_csv("salmondata/rawsalmon.csv")
view(salmon)
salmon <- salmon %>% rename(species = `Species Name`,
num_fish = `Number Of Fish (estimated)`,
land_weight = `Landed Weight (lbs)`,
whole_weight = `Whole Weight (lbs)`,
num_permit = `Permit Count`,
num_processor = `Processor Count`,
num_vessel = `Vessel Count`)
write.csv(salmon, "salmondata/salmon.csv")
ggplot(salmon, aes(x = Year, y = num_fish))+
geom_line(stat = "identity", aes(color = sp_name))
salmon <- salmon %>% rename(species = `Species Name`,
num_fish = `Number Of Fish (estimated)`,
land_weight = `Landed Weight (lbs)`,
whole_weight = `Whole Weight (lbs)`,
num_permit = `Permit Count`,
num_processor = `Processor Count`,
num_vessel = `Vessel Count`)
view(salmon)
ggplot(salmon, aes(x = Year, y = num_fish)) +
geom_line(stat = "identity", aes(color = species))
salmon <- read_csv("salmondata/rawsalmon.csv")
view(salmon)
salmon <- salmon %>% rename(species = `Species Name`,
num_fish = `Number Of Fish (estimated)`,
land_weight = `Landed Weight (lbs)`,
whole_weight = `Whole Weight (lbs)`,
num_permit = `Permit Count`,
num_processor = `Processor Count`,
num_vessel = `Vessel Count`)
write.csv(salmon, "salmondata/salmon.csv")
View(fishandgame)
# Load necessary libraries
library(tidyverse)
library(tidytext)
library(textdata)
words <- fishandgame$FULL_TEXT %>%
unnest_tokens(output = word, input = text)
fishandgame <- read.csv("fish_and_game.csv")
words <- fishandgame$FULL_TEXT %>%
unnest_tokens(word, input = text)
fishandgame %>%
ggplot(aes(x = Legislature)) +
geom_histogram()
fishandgame %>%
ggplot(aes(x = Legislature)) +
geom_histogram(bins = 10)
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
View(tokenized_fishandgame)
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
View(tokenized_fishandgame)
fishandgame <- read.csv("fish_and_game.csv")
fishandgame <- fishandgame %>%
mutate(yearstart = case_when(
Legislature == 33 ~ 2023,
Legislature == 32 ~ 2021,
Legislature == 31 ~ 2019,
Legislature == 30 ~ 2017,
Legislature == 29 ~ 2015,
Legislature == 28 ~ 2013,
Legislature == 27 ~ 2011,
Legislature == 26 ~ 2009,
Legislature == 25 ~ 2007,
Legislature == 24 ~ 2005,
Legislature == 23 ~ 2003,
Legislature == 22 ~ 2001,
Legislature == 21 ~ 1999,
Legislature == 20 ~ 1997,
Legislature == 19 ~ 1995,
Legislature == 18 ~ 1993,
Legislature == 17 ~ 1991,
Legislature == 16 ~ 1989,
Legislature == 15 ~ 1987,
Legislature == 14 ~ 1985,
))
View(fishandgame)
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
View(tokenized_fishandgame)
view(salmon)
fishandgame <- read.csv("fish_and_game.csv")
fishandgame <- fishandgame %>%
mutate(Year = case_when(
Legislature == 33 ~ 2023,
Legislature == 32 ~ 2021,
Legislature == 31 ~ 2019,
Legislature == 30 ~ 2017,
Legislature == 29 ~ 2015,
Legislature == 28 ~ 2013,
Legislature == 27 ~ 2011,
Legislature == 26 ~ 2009,
Legislature == 25 ~ 2007,
Legislature == 24 ~ 2005,
Legislature == 23 ~ 2003,
Legislature == 22 ~ 2001,
Legislature == 21 ~ 1999,
Legislature == 20 ~ 1997,
Legislature == 19 ~ 1995,
Legislature == 18 ~ 1993,
Legislature == 17 ~ 1991,
Legislature == 16 ~ 1989,
Legislature == 15 ~ 1987,
Legislature == 14 ~ 1985,
))
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
salmontextanalysisdf <- left_join(tokenized_fishandgame, salmon, by = "Year")
salmontextanalysisdf <- inner_join(tokenized_fishandgame, salmon, by = "Year")
View(tokenized_fishandgame)
data("stop_words")
stopfishandgame <- tokenized_fishandgame %>%
anti_join(stop_words)
View(stopfishandgame)
salmontextanalysisdf <- inner_join(stopfishandgame, salmon, by = "Year")
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT),
FULL_TEXT = str_replace_all(FULL_TEXT, "\\b\\d+\\b", ""))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
data("stop_words")
stopfishandgame <- tokenized_fishandgame %>%
anti_join(stop_words)
salmontextanalysisdf <- inner_join(stopfishandgame, salmon, by = "Year")
View(stopfishandgame)
View(stopfishandgame)
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT),
FULL_TEXT = str_replace_all(FULL_TEXT, "\\b\\d+\\b", ""),
FULL_TEXT = str_replace_all(FULL_TEXT, "\\b\\w*\\d+\\w*\\b", ""))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
data("stop_words")
stopfishandgame <- tokenized_fishandgame %>%
anti_join(stop_words)
View(stopfishandgame)
#salmontextanalysisdf <- inner_join(stopfishandgame, salmon, by = "Year")
View(salmontextanalysisdf)
threshold <- 500
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in fish and game bills",
subtitle = glue("Words occurring more than 500 times"),
y = NULL, x = NULL
)
threshold <- 500
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in fish and game bills",
subtitle = "Words occurring more than 500 times",
y = NULL, x = NULL
)
threshold <- 5000
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in fish and game bills",
subtitle = "Words occurring more than 5000 times",
y = NULL, x = NULL
)
threshold <- 50000
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in fish and game bills",
subtitle = "Words occurring more than 5000 times",
y = NULL, x = NULL
)
threshold <- 50000
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in Alaksa Department of Fish and Game bills",
subtitle = "Words occurring more than 50,000 times",
y = NULL, x = NULL
)
fishandgame <- fishandgame %>%
mutate(FULL_TEXT = tolower(FULL_TEXT)) %>%
mutate(FULL_TEXT = gsub("[[:punct:]]", "", FULL_TEXT),
FULL_TEXT = str_replace_all(FULL_TEXT, "\\b\\d+\\b", ""),
FULL_TEXT = str_replace_all(FULL_TEXT, "\\b\\w*\\d+\\w*\\b", ""))
tokenized_fishandgame <- fishandgame %>%
unnest_tokens(word, FULL_TEXT)
data("stop_words")
stopfishandgame <- tokenized_fishandgame %>%
anti_join(stop_words)
salmontextanalysisdf <- inner_join(stopfishandgame, salmon, by = "Year")
threshold <- 50000
salmontextanalysisdf %>%
count(word, sort = TRUE) %>%
filter(n > threshold) %>%
ggplot(aes(y = fct_reorder(word, n), x = n, fill = log(n))) +
geom_col(show.legend = FALSE) +
labs(
title = "Frequency of words in Alaksa Department of Fish and Game bills",
subtitle = "Words occurring more than 50,000 times",
y = NULL, x = NULL
)
