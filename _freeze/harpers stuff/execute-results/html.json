{
  "hash": "d5f90ef243aa27b49f2fbba5aa7d7284",
  "result": {
    "markdown": "---\ntitle: \"Untitled\"\noutput: html_document\ndate: \"2024-04-23\"\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(stringr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegis <- read_csv(\"fish_and_game.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 428 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Name, Link, FULL_TEXT\ndbl (1): Legislature\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nview(legis)\nlegis_line <- legis$FULL_TEXT[7] %>%\n  str_split(\"(?<=\\\\.)\\\\s*\") %>% # specify the end-of-line character(s)\n  pluck(1) \nlegis_7 <- legis_line %>%\n  str_subset(\"fish\")\nview(legis_7)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_legis <- legis %>%\n  group_by(Legislature) %>%\n  summarise(Combined_Text = paste(FULL_TEXT, collapse = \" ! \"))\n\nlineee <- combined_legis$Combined_Text[10] %>%\n  str_split(\"(?<=\\\\.)\\\\s*\") %>% # specify the end-of-line character(s)\n  pluck(1) \nlegis_1 <- lineee %>%\n  str_subset(\"fish\")\nlength(legis_1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 22\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfishes <- data.frame(\n  legislature = c(18, 19, 20, 21, 22, 23, 24, 25, 26, 27), \n  fishcount = c(88, 133, 280, 149, 120, 54, 161, 91, 31, 22), \n  year = c(1993, 1995, 1997, 1999, 2001, 2003, 2005, 2007, 2009, 2011)\n)\nplot <- ggplot(data = fishes, aes(x = legislature, y = fishcount)) + \n  geom_line() +\n  scale_x_continuous(breaks = c(18, 19, 20, 21, 22, 23, 24, 25, 26, 27)) +\n  labs(\n    title = \"Times 'fish' is mentioned in Alaska legislature from 1993-2012\", \n    y = \"'fish' mentioned\", \n    x = \"Legislature number\"\n  )\nplot\n```\n\n::: {.cell-output-display}\n![](harpers-stuff_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsalmon <- read_csv(\"salmondata/salmon.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nNew names:\nRows: 1902 Columns: 10\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \",\" chr\n(2): Area, species dbl (8): ...1, Year, num_fish, land_weight, whole_weight,\nnum_permit, num_pr...\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -> `...1`\n```\n:::\n\n```{.r .cell-code}\nview(salmon)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlegis <- read_csv(\"fish_and_game.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 428 Columns: 4\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): Name, Link, FULL_TEXT\ndbl (1): Legislature\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nleng <- length(legis$Legislature)\n\ngetti <- function(word){\n  word_freq <- c()\n  for (i in 1:leng){ \n    legis_line <- legis$FULL_TEXT[i] %>%\n    str_split(\"(?<=\\\\.)\\\\s*\") %>% # specify the end-of-line character(s)\n    pluck(1) \n    word_freq_i <- legis_line %>%\n    str_subset(word) %>%\n    length()\n    #message(word_freq_i) #only to check it works\n    word_freq <- append(word_freq, word_freq_i)\n  }\n  return(word_freq)\n}\n\nlegis_word <- legis %>%\n  mutate(fish = getti(\"[F/f]ish\")) %>%\n  mutate(fisheries = getti(\"[F/f]isher[ies/y]\")) %>%\n  mutate(permit = getti(\"[P/p]ermit\")) %>%\n  mutate(vessel = getti(\"[V/v]essel\")) %>%\n  mutate(salmon = getti(\"[S/s]almon\")) %>%\n  mutate(limit = getti(\"[L/l]imit\")) \nlegis_word_longer <- legis_word %>% \n  select(-FULL_TEXT) %>%\n  pivot_longer(c('fish', 'fisheries', 'permit', 'vessel', 'salmon', 'limit'), names_to = \"word\", values_to = \"times_mentioned\") %>%\n  mutate(Year = Legislature) %>%\n  mutate(Year = case_when(\n    Legislature == 33 ~ 2023,\n    Legislature == 32 ~ 2021,\n    Legislature == 31 ~ 2019,\n    Legislature == 30 ~ 2017,\n    Legislature == 29 ~ 2015,\n    Legislature == 28 ~ 2013,\n    Legislature == 27 ~ 2011,\n    Legislature == 26 ~ 2009,\n    Legislature == 25 ~ 2007,\n    Legislature == 24 ~ 2005,\n    Legislature == 23 ~ 2003,\n    Legislature == 22 ~ 2001,\n    Legislature == 21 ~ 1999,\n    Legislature == 20 ~ 1997,\n    Legislature == 19 ~ 1995,\n    Legislature == 18 ~ 1993,\n    Legislature == 17 ~ 1991,\n    Legislature == 16 ~ 1989,\n    Legislature == 15 ~ 1987,\n    Legislature == 14 ~ 1985\n  ))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwordplot <- ggplot(data = legis_word_longer, aes(x = Year, y = times_mentioned, fill = word)) +\n  geom_bar(position='stack', stat='identity') +\n  theme_minimal() + \n  labs(\n    title = \"Frequency of Keywords in Alaska State Legislature by Year\", \n    x = \"Year\", \n    y = \"Frequency\"\n  )\nwordplot\n```\n\n::: {.cell-output-display}\n![](harpers-stuff_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nyearly_word <- legis_word_longer %>%\n  group_by(Year, word) %>%\n  summarise(count = sum(times_mentioned))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'Year'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nglimpse(yearly_word)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 96\nColumns: 3\nGroups: Year [16]\n$ Year  <dbl> 1993, 1993, 1993, 1993, 1993, 1993, 1995, 1995, 1995, 1995, 1995…\n$ word  <chr> \"fish\", \"fisheries\", \"limit\", \"permit\", \"salmon\", \"vessel\", \"fis…\n$ count <int> 92, 8, 1, 18, 7, 0, 138, 10, 8, 60, 16, 0, 317, 91, 38, 103, 7, …\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nyearlyplot <- ggplot(data = yearly_word, aes(x = Year, y = count, color = word)) +\n  geom_line() +\n  theme_minimal() + \n  labs(\n    title = \"Frequency of Keywords in Alaska State Legislature by Year\", \n    x = \"Year\", \n    y = \"Frequency\"\n  )\nyearlyplot\n```\n\n::: {.cell-output-display}\n![](harpers-stuff_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nscaled_legis_word <- legis_word %>%\n  select(-FULL_TEXT) %>% \n  mutate(fish = scale(fish), \n         fisheries = scale(fisheries), \n         limit = scale(limit), \n         permit = scale(permit), \n         salmon = scale(salmon), \n         vessel = scale(vessel)\n  ) %>%\n  pivot_longer(c('fish', 'fisheries', 'permit', 'vessel', 'salmon', 'limit'), names_to = \"word\", values_to = \"times_mentioned\") %>%\n  mutate(Year = Legislature) %>%\n  mutate(Year = case_when(\n    Legislature == 33 ~ 2023,\n    Legislature == 32 ~ 2021,\n    Legislature == 31 ~ 2019,\n    Legislature == 30 ~ 2017,\n    Legislature == 29 ~ 2015,\n    Legislature == 28 ~ 2013,\n    Legislature == 27 ~ 2011,\n    Legislature == 26 ~ 2009,\n    Legislature == 25 ~ 2007,\n    Legislature == 24 ~ 2005,\n    Legislature == 23 ~ 2003,\n    Legislature == 22 ~ 2001,\n    Legislature == 21 ~ 1999,\n    Legislature == 20 ~ 1997,\n    Legislature == 19 ~ 1995,\n    Legislature == 18 ~ 1993,\n    Legislature == 17 ~ 1991,\n    Legislature == 16 ~ 1989,\n    Legislature == 15 ~ 1987,\n    Legislature == 14 ~ 1985\n  ))\n\nscaleplot <- ggplot(data = scaled_legis_word, aes(x = Year, y = times_mentioned, fill = word)) +\n  geom_bar(position='stack', stat='identity') +\n  theme_minimal() + \n  labs(\n    title = \"Frequency of Keywords in Alaska State Legislature by Year\", \n    x = \"Year\", \n    y = \"Frequency\"\n  )\nscaleplot\n```\n\n::: {.cell-output-display}\n![](harpers-stuff_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "harpers-stuff_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}