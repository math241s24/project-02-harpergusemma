{
  "hash": "faad4cb1a24d0662475eb5588cae8df0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"\"\nsubtitle: \"Project 2\"\nauthor: \"\"\nformat: html\neditor: visual\nexecute:\n  echo: false\n  warning: false\n  message: false\n---\n\n\n## Abstract\n\n## Introduction\n\n## Methods\n\nTo obtain the text data from the [Alaska legislature](https://www.akleg.gov/basis/Home/BillsandLaws/32) on fishing, we scraped the website for all the bills within the \"Fish and Game\" subject. Using the `rvest` package and significant help from the Data Lab, we were able to scrape the site and create a data frame with each bill from each year on the subject of Fish and Game.\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  Legislature Name    Link                                             FULL_TEXT\n        <dbl> <chr>   <chr>                                            <chr>    \n1          33 HB0020A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n2          33 HB0039A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n3          33 HB0040A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n4          33 HB0042A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n5          33 HB0054A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n6          33 HB0064A https://www.akleg.gov/basis/Bill/Text/33?Hsid=H… \"\\n\\r\\n0…\n```\n\n\n:::\n:::\n\n\nWe then created a function which divided the `legis` dataset by line and subsetted it into the lines which contained a given keyword. The length of this subset was appended into a new dataframe providing the number of lines containing the keyword for each bill. This was then organized by year into `legis_word_longer`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleng <- length(legis$Legislature)\n\ngetti <- function(word){\n  word_freq <- c()\n  for (i in 1:leng){ #looping through each bill\n    legis_line <- legis$FULL_TEXT[i] %>%\n    str_split(\"(?<=\\\\.)\\\\s*\") %>% \n    pluck(1) \n    word_freq_i <- legis_line %>%\n    str_subset(word) %>%\n    length()\n    word_freq <- append(word_freq, word_freq_i)\n  }\n  return(word_freq) #returns a vector of the keyword counts for each bill\n}\n\nlegis_word <- legis %>% \n  mutate(fish = getti(\"[F/f]ish\")) %>%\n  mutate(fisheries = getti(\"[F/f]isher[ies/y]\")) %>%\n  mutate(permit = getti(\"[P/p]ermit\")) %>%\n  mutate(vessel = getti(\"[V/v]essel\")) %>%\n  mutate(salmon = getti(\"[S/s]almon\")) %>%\n  mutate(limit = getti(\"[L/l]imit\")) \nlegis_word_longer <- legis_word %>% \n  select(-FULL_TEXT) %>%\n  pivot_longer(c('fish', 'fisheries', 'permit', 'vessel', 'salmon', 'limit'), names_to = \"word\", values_to = \"times_mentioned\") %>%\n  mutate(Year = Legislature) %>%\n  mutate(Year = case_when(\n    Legislature == 33 ~ 2023,\n    Legislature == 32 ~ 2021,\n    Legislature == 31 ~ 2019,\n    Legislature == 30 ~ 2017,\n    Legislature == 29 ~ 2015,\n    Legislature == 28 ~ 2013,\n    Legislature == 27 ~ 2011,\n    Legislature == 26 ~ 2009,\n    Legislature == 25 ~ 2007,\n    Legislature == 24 ~ 2005,\n    Legislature == 23 ~ 2003,\n    Legislature == 22 ~ 2001,\n    Legislature == 21 ~ 1999,\n    Legislature == 20 ~ 1997,\n    Legislature == 19 ~ 1995,\n    Legislature == 18 ~ 1993,\n    Legislature == 17 ~ 1991,\n    Legislature == 16 ~ 1989,\n    Legislature == 15 ~ 1987,\n    Legislature == 14 ~ 1985\n  ))\nhead(legis_word_longer)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 6\n  Legislature Name    Link                           word  times_mentioned  Year\n        <dbl> <chr>   <chr>                          <chr>           <int> <dbl>\n1          33 HB0020A https://www.akleg.gov/basis/B… fish                3  2023\n2          33 HB0020A https://www.akleg.gov/basis/B… fish…               3  2023\n3          33 HB0020A https://www.akleg.gov/basis/B… perm…               0  2023\n4          33 HB0020A https://www.akleg.gov/basis/B… vess…               0  2023\n5          33 HB0020A https://www.akleg.gov/basis/B… salm…               0  2023\n6          33 HB0020A https://www.akleg.gov/basis/B… limit               0  2023\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}